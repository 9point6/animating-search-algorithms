<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>animate.coffee</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div id="jump_to">
    Jump To &hellip;
    <div id="jump_wrapper">
      <div id="jump_page">
          <a class="source" href="BFS.html">BFS.coffee</a>
          <a class="source" href="DFS.html">DFS.coffee</a>
          <a class="source" href="DLS.html">DLS.coffee</a>
          <a class="source" href="algorithm.html">algorithm.coffee</a>
          <a class="source" href="animate.html">animate.coffee</a>
          <a class="source" href="connection.html">connection.coffee</a>
          <a class="source" href="graph.html">graph.coffee</a>
          <a class="source" href="iterative_deepening.html">iterative_deepening.coffee</a>
          <a class="source" href="main.html">main.coffee</a>
          <a class="source" href="point.html">point.coffee</a>
          <a class="source" href="z-other.html">z-other.coffee</a>
      </div>
    </div>
  </div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>animate.coffee</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-Developers'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Developers">&#182;</a>
        </div>
        <p>Part of the <strong>Animating Search Algorithms</strong> project</p>

<h2>Developers</h2>

<ul>
<li><a href="http://www.csc.liv.ac.uk/~cs8ib/">Ian Brown</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8jrh/">Jack Histon</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8cj/">Colin Jackson</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8jlj/">Jennifer Jones</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8js/">John Sanderson</a></li>
</ul>

<p>Do not modify or distribute without permission.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Main_Documentation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Main_Documentation">&#182;</a>
        </div>
        <h2>Main Documentation</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-3'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
        </div>
        <p>Animate class</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="k">class</span> <span class="nc">Animate</span></pre></div>
      </td>
    </tr>
    <tr id='section-4'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-4">&#182;</a>
        </div>
        <p>Stores pointer value for current position in traverse_info array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="n">pointer</span><span class="p">:</span> <span class="mi">0</span></pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p>Stores the algorithm currently being worked on in the UI environment.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="n">algorithm</span><span class="p">:</span> <span class="n">null</span>

    <span class="n">destroy</span><span class="p">:</span> <span class="o">-&gt;</span>
        <span class="no">APP</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">remove_styles</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">delete</span> <span class="err">@</span></pre></div>
      </td>
    </tr>
    <tr id='section-animate.step_forward(_)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-animate.step_forward(_)">&#182;</a>
        </div>
        <h3>animate.step_forward( )</h3>

<p>move forward one step in the traverse_info array for a given algorithm.</p>

<h3>Parameters</h3>

<h4>TODO</h4>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="n">step_forward</span><span class="p">:</span> <span class="o">-&gt;</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <p>check for null value in traverse_info. if the pointer has not
reached the last element of the array already, then run the code.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info?</span> <span class="ow">and</span> <span class="vi">@pointer</span> <span class="o">&lt;</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info</span><span class="o">.</span><span class="n">length</span></pre></div>
      </td>
    </tr>
    <tr id='section-8'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-8">&#182;</a>
        </div>
        <p>create local variable for storing the array of points/connections</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="vi">@traverse_info</span> <span class="o">=</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info</span></pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p>create a variable for storing the element the pointer represents</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">current_item</span> <span class="o">=</span> <span class="vi">@traverse_info</span><span class="o">[</span><span class="vi">@pointer</span><span class="o">]</span>
            <span class="n">console</span><span class="o">.</span><span class="n">log</span> <span class="s2">&quot;current item &quot;</span> <span class="o">+</span> <span class="n">current_item</span><span class="o">.</span><span class="n">name</span></pre></div>
      </td>
    </tr>
    <tr id='section-10'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
        </div>
        <p>update the current item pointed at to &ldquo;viewing&rdquo;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">current_item</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;viewing&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>if the current_item selected is a point object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="n">current_item</span> <span class="n">instanceof</span> <span class="no">Point</span></pre></div>
      </td>
    </tr>
    <tr id='section-12'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-12">&#182;</a>
        </div>
        <p>loop through all of the points connections</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">console</span><span class="o">.</span><span class="n">log</span> <span class="s2">&quot;IT GOT HERE 1&quot;</span>
                <span class="k">for</span> <span class="n">con</span> <span class="k">in</span> <span class="n">current_item</span><span class="o">.</span><span class="n">connections</span></pre></div>
      </td>
    </tr>
    <tr id='section-13'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
        </div>
        <p>This stops overwriting the style of the previous element in the
traverse_info array as it should be the only connection in the
&ldquo;viewing&rdquo; state.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                    <span class="k">if</span> <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">style</span> <span class="n">is</span> <span class="s2">&quot;normal&quot;</span>
                        <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;potential&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-14'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
        </div>
        <p>the current_item is not the first element in the array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">console</span><span class="o">.</span><span class="n">log</span> <span class="s2">&quot;pointer &quot;</span> <span class="o">+</span> <span class="vi">@pointer</span>
            <span class="k">if</span> <span class="vi">@pointer</span> <span class="n">isnt</span> <span class="mi">0</span></pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p>create a variable for storing the previous element.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">previous_item</span> <span class="o">=</span> <span class="vi">@traverse_info</span><span class="o">[</span><span class="vi">@pointer</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span>
                <span class="n">console</span><span class="o">.</span><span class="n">log</span> <span class="s2">&quot;previous_item &quot;</span> <span class="o">+</span> <span class="n">previous_item</span><span class="o">.</span><span class="n">name</span></pre></div>
      </td>
    </tr>
    <tr id='section-16'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-16">&#182;</a>
        </div>
        <p>if the previous item is in the &ldquo;viewing&rdquo; style (which it should
be)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">if</span> <span class="n">previous_item</span><span class="o">.</span><span class="n">style</span> <span class="n">is</span> <span class="s2">&quot;viewing&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>update previous items style to visited</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                    <span class="n">previous_item</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;visited&quot;</span>
                    <span class="k">if</span> <span class="n">previous_item</span> <span class="n">instanceof</span> <span class="no">Point</span></pre></div>
      </td>
    </tr>
    <tr id='section-18'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-18">&#182;</a>
        </div>
        <p>change all of its connections back to normal unless it
is an AStar algorithm. AStar works by keeping previous
connections as &ldquo;potentials&rdquo; in an open set.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                        <span class="k">for</span> <span class="n">con</span> <span class="k">in</span> <span class="n">previous_item</span><span class="o">.</span><span class="n">connections</span>
                            <span class="k">if</span> <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">style</span> <span class="n">is</span> <span class="s2">&quot;potential&quot;</span> <span class="ow">and</span>
                                <span class="vi">@algorithm</span><span class="o">.</span><span class="n">name</span> <span class="n">isnt</span> <span class="s2">&quot;AStar&quot;</span> <span class="ow">and</span>
                                    <span class="vi">@algorithm</span><span class="o">.</span><span class="n">name</span> <span class="n">isnt</span> <span class="s2">&quot;BiDi&quot;</span>
                                        <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;normal&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>increase the pointer value</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="vi">@pointer</span><span class="o">++</span></pre></div>
      </td>
    </tr>
    <tr id='section-animate.step_backward(_)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-animate.step_backward(_)">&#182;</a>
        </div>
        <h2>animate.step_backward( )</h2>

<p>move backward one step in the traverse_info array for a given algorithm.</p>

<h3>Parameters</h3>

<h4>TODO</h4>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="n">step_backward</span><span class="p">:</span> <span class="o">-&gt;</span></pre></div>
      </td>
    </tr>
    <tr id='section-21'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-21">&#182;</a>
        </div>
        <p>Check for null value in traverse_info. Pointer has to be greater than
zero, as the pointer is decremented immediately after this comparison.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info?</span> <span class="ow">and</span> <span class="vi">@pointer</span> <span class="o">&gt;</span> <span class="mi">0</span></pre></div>
      </td>
    </tr>
    <tr id='section-22'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-22">&#182;</a>
        </div>
        <p>Decrement the pointer property</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="vi">@pointer</span><span class="o">--</span></pre></div>
      </td>
    </tr>
    <tr id='section-23'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
        </div>
        <p>create variable for storing array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="vi">@traverse_info</span> <span class="o">=</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info</span></pre></div>
      </td>
    </tr>
    <tr id='section-24'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-24">&#182;</a>
        </div>
        <p>create variable for current item pointer looks at in the array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">current_item</span> <span class="o">=</span> <span class="vi">@traverse_info</span><span class="o">[</span><span class="n">pointer</span><span class="o">]</span></pre></div>
      </td>
    </tr>
    <tr id='section-25'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-25">&#182;</a>
        </div>
        <p>change the current item to a &ldquo;normal&rdquo; style</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">current_item</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;normal&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-26'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-26">&#182;</a>
        </div>
        <p>if the current item is a point then change all of it&rsquo;s potential
connections back to a normal style.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="n">current_item</span> <span class="n">instanceof</span> <span class="no">Point</span>
                <span class="k">for</span> <span class="n">con</span> <span class="k">in</span> <span class="n">current_item</span><span class="o">.</span><span class="n">connections</span>
                    <span class="k">if</span> <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">style</span> <span class="n">is</span> <span class="s2">&quot;potential&quot;</span>
                        <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;normal&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-27'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-27">&#182;</a>
        </div>
        <p>If there is an item before the current item in the traverse_info
array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="vi">@pointer</span> <span class="n">is</span> <span class="ow">not</span> <span class="mi">0</span></pre></div>
      </td>
    </tr>
    <tr id='section-28'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-28">&#182;</a>
        </div>
        <p>Create a variable for storing the previous item</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">previous_item</span> <span class="o">=</span> <span class="vi">@traverse_info</span><span class="o">[</span><span class="vi">@pointer</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span></pre></div>
      </td>
    </tr>
    <tr id='section-29'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-29">&#182;</a>
        </div>
        <p>Change it&rsquo;s style to &ldquo;viewing&rdquo;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">previous_item</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;viewing&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-30'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-30">&#182;</a>
        </div>
        <p>if the previous item is a point change all of its connections
to now be in a &ldquo;potential&rdquo; style.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">if</span> <span class="n">previous_item</span> <span class="n">instanceof</span> <span class="no">Point</span>
                    <span class="k">for</span> <span class="n">con</span> <span class="k">in</span> <span class="n">previous_item</span><span class="o">.</span><span class="n">connections</span>
                        <span class="k">if</span> <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">style</span> <span class="n">isnt</span> <span class="s2">&quot;viewing&quot;</span>
                            <span class="n">con</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">update_style</span> <span class="s2">&quot;potential&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-animate.traverse(_)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-animate.traverse(_)">&#182;</a>
        </div>
        <h3>animate.traverse( )</h3>

<p>Loop through the given array, animating each given
node and connection in order.</p>

<h3>Parameters</h3>

<h4>TODO</h4>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="n">traverse</span><span class="p">:</span> <span class="o">-&gt;</span></pre></div>
      </td>
    </tr>
    <tr id='section-32'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-32">&#182;</a>
        </div>
        <p>if the list to iterate over is not null</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info?</span>
            <span class="k">while</span> <span class="n">pointer</span> <span class="o">&lt;=</span> <span class="vi">@algorithm</span><span class="o">.</span><span class="n">traverse_info</span><span class="o">.</span><span class="n">length</span>
                <span class="n">this</span><span class="o">.</span><span class="n">step_foward</span>

<span class="n">this</span><span class="o">.</span><span class="n">Animate</span> <span class="o">=</span> <span class="no">Animate</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
