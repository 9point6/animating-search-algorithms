<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>animate.coffee</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div id="jump_to">
    Jump To &hellip;
    <div id="jump_wrapper">
      <div id="jump_page">
          <a class="source" href="BFS.html">BFS.coffee</a>
          <a class="source" href="DFS.html">DFS.coffee</a>
          <a class="source" href="DFS2.html">DFS2.coffee</a>
          <a class="source" href="DLS.html">DLS.coffee</a>
          <a class="source" href="algorithm.html">algorithm.coffee</a>
          <a class="source" href="animate.html">animate.coffee</a>
          <a class="source" href="connection.html">connection.coffee</a>
          <a class="source" href="itarative_deepening.html">itarative_deepening.coffee</a>
          <a class="source" href="main.html">main.coffee</a>
          <a class="source" href="point.html">point.coffee</a>
          <a class="source" href="z-other.html">z-other.coffee</a>
      </div>
    </div>
  </div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>animate.coffee</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-Developers'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Developers">&#182;</a>
        </div>
        <p>Part of the <strong>Animating Search Algorithms</strong> project</p>

<h2>Developers</h2>

<ul>
<li><a href="http://www.csc.liv.ac.uk/~cs8ib/">Ian Brown</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8jrh/">Jack Histon</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8cj/">Colin Jackson</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8jlj/">Jennifer Jones</a></li>
<li><a href="http://www.csc.liv.ac.uk/~cs8js/">John Sanderson</a></li>
</ul>

<p>Do not modify or distribute without permission.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Main_Documentation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Main_Documentation">&#182;</a>
        </div>
        <h2>Main Documentation</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-3'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
        </div>
        <p>Animate class</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="k">class</span> <span class="nx">animate</span></pre></div>
      </td>
    </tr>
    <tr id='section-4'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-4">&#182;</a>
        </div>
        <p>Stores pointer value for current position in traverse_info array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nv">pointer: </span><span class="mi">0</span></pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p>Stores the algorithm currently being worked on in the UI environment.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nv">algorithm: </span><span class="kc">null</span></pre></div>
      </td>
    </tr>
    <tr id='section-animate.step_forward(_)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-animate.step_forward(_)">&#182;</a>
        </div>
        <h3>animate.step_forward( )</h3>

<p>move forward one step in the traverse_info array for a given algorithm.</p>

<h3>Parameters</h3>

<h4>TODO</h4>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nv">step_forward: </span><span class="o">-&gt;</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <p>check for null value in traverse_info. if the pointer has not
reached the last element of the array already, then run the code.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="nx">algorithm</span><span class="p">.</span><span class="nx">traverse_info</span> <span class="o">is</span> <span class="o">not</span> <span class="kc">null</span> <span class="o">and</span> <span class="nx">pointer</span> <span class="o">&lt;</span> <span class="nx">algorithm</span><span class="p">.</span><span class="nx">traverse_info</span><span class="p">.</span><span class="nx">length</span></pre></div>
      </td>
    </tr>
    <tr id='section-8'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-8">&#182;</a>
        </div>
        <p>create local variable for storing the array of points/connections</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="vi">@traverse_info = </span><span class="nx">algorithm</span><span class="p">.</span><span class="nx">traverse_info</span></pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p>create a variable for storing the element the pointer represents</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nv">current_item = </span><span class="nx">@traverse_info</span><span class="p">[</span><span class="nx">pointer</span><span class="p">]</span></pre></div>
      </td>
    </tr>
    <tr id='section-10'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
        </div>
        <p>update the current item pointed at to &ldquo;viewing&rdquo;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">current_item</span><span class="p">.</span><span class="nx">update_style</span> <span class="s2">&quot;viewing&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>if the current_item selected is a point object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="nx">current_item</span> <span class="k">instanceof</span> <span class="nx">Point</span></pre></div>
      </td>
    </tr>
    <tr id='section-12'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-12">&#182;</a>
        </div>
        <p>loop through all of the points connections</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">for</span> <span class="nx">con</span> <span class="k">in</span> <span class="nx">current_item</span><span class="p">.</span><span class="nx">connections</span></pre></div>
      </td>
    </tr>
    <tr id='section-13'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
        </div>
        <p>This stops overwriting the style of the previous element in the
traverse_info array as it should be the only connection in the
&ldquo;viewing&rdquo; state.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                    <span class="k">if</span> <span class="nx">con</span><span class="p">.</span><span class="nx">style</span> <span class="o">is</span> <span class="o">not</span> <span class="s2">&quot;viewing&quot;</span>
                        <span class="nx">con</span><span class="p">.</span><span class="nx">update_style</span> <span class="s2">&quot;potential&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-14'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
        </div>
        <p>the current_item is not the first element in the array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="nx">pointer</span> <span class="o">is</span> <span class="o">not</span> <span class="mi">0</span></pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p>create a variable for storing the previous element.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nv">previous_item = </span><span class="nx">@traverse_info</span><span class="p">[</span><span class="nx">pointer</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></pre></div>
      </td>
    </tr>
    <tr id='section-16'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-16">&#182;</a>
        </div>
        <p>if the previous item is in the &ldquo;viewing&rdquo; style (which it should
be)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">if</span> <span class="nx">previous_item</span><span class="p">.</span><span class="nx">style</span> <span class="o">is</span> <span class="s2">&quot;viewing&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>update previous items style to visited</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                    <span class="nx">previous_item</span><span class="p">.</span><span class="nx">update_style</span> <span class="s2">&quot;visited&quot;</span>
                    <span class="k">if</span> <span class="nx">previous_item</span> <span class="k">instanceof</span> <span class="nx">Point</span></pre></div>
      </td>
    </tr>
    <tr id='section-18'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-18">&#182;</a>
        </div>
        <p>change all of its connections back to normal unless it
is an AStar algorithm. AStar works by keeping previous
connections as &ldquo;potentials&rdquo; in an open set.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                        <span class="k">for</span> <span class="nx">con</span> <span class="k">in</span> <span class="nx">previous_item</span><span class="p">.</span><span class="nx">connections</span>
                            <span class="k">if</span> <span class="nx">con</span><span class="p">.</span><span class="nx">style</span> <span class="o">is</span> <span class="s2">&quot;potential&quot;</span> <span class="o">and</span> 
                                <span class="nx">algorithm</span><span class="p">.</span><span class="nx">name</span> <span class="o">is</span> <span class="o">not</span> <span class="s2">&quot;AStar&quot;</span> <span class="o">and</span> 
                                    <span class="nx">algorithm</span><span class="p">.</span><span class="nx">name</span> <span class="o">is</span> <span class="o">not</span> <span class="s2">&quot;BiDi&quot;</span>
                                        <span class="nx">con</span><span class="p">.</span><span class="nx">update_style</span> <span class="s2">&quot;normal&quot;</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>increase the pointer value                                </p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">pointer</span><span class="o">++</span></pre></div>
      </td>
    </tr>
    <tr id='section-20'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-20">&#182;</a>
        </div>
        <p>animate.step<em>backward( )
    # move backward one step in the traverse</em>info array for a given algorithm.
    # ### Parameters
    #
    # #### TODO
    step_backward: &ndash;&gt;</p>

<pre><code>    # Check for null value in traverse_info. Pointer has to be greater than
    # zero, as the pointer is decremented immediately after this comparison.
    if algorithm.traverse_info is not null and pointer &gt; 0

        # Decrement the pointer property
        pointer&mdash;

        # create variable for storing array
        @traverse_info = algorithm.traverse_info
        # create variable for current item pointer looks at in the array
        current_item = @traverse_info[pointer]

        # change the current item to a &ldquo;normal&rdquo; style
        current_item.update_style &ldquo;normal&rdquo;

        # if the current item is a point then change all of it&rsquo;s potential
        # connections back to a normal style.
        if current_item instanceof Point
            for con in current_item.connections
                if con.style is &ldquo;potential&rdquo;
                    con.update_style &ldquo;normal&rdquo;

        # If there is an item before the current item in the traverse_info
        # array
        if pointer is not 0
            # Create a variable for storing the previous item
            previous_item = @traverse_info[pointer-1]
            # Change it&rsquo;s style to &ldquo;viewing&rdquo;
            previous_item.update_style &ldquo;viewing&rdquo;

            # if the previous item is a point change all of its connections
            # to now be in a &ldquo;potential&rdquo; style.
            if previous_item instanceof Point
                for con in previous_item.connections
                    if con.style is not &ldquo;viewing&rdquo;
                        con.update_style &ldquo;potential&rdquo;

# ### animate.traverse( )
# Loop through the given array, animating each given
# node and connection in order.
# ### Parameters
#
# #### TODO
traverse: &ndash;&gt;
    # if the list to iterate over is not null
    if algorithm.traverse_info is not null
        while pointer is &lt;= algorithm.traverse_info.length
            this.step_foward
</code></pre>

      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
